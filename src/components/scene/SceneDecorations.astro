---
import PixelArt from "../pixel/PixelArt.astro";

type Decoration = {
  className: string;
  width: number | string;
  height: number | string;
  viewBox: string;
  rects: Array<{
    x: number;
    y: number;
    width: number;
    height: number;
    fill: string;
    opacity?: number;
  }>;
  preserveAspectRatio?: string;
};

const clouds: Decoration[] = [
  {
    className: "absolute top-[5%] left-[5%] opacity-60",
    width: 120,
    height: 60,
    viewBox: "0 0 60 30",
    rects: [
      { x: 10, y: 15, width: 40, height: 10, fill: "white" },
      { x: 15, y: 10, width: 10, height: 5, fill: "white" },
      { x: 30, y: 8, width: 15, height: 7, fill: "white" },
      { x: 5, y: 18, width: 8, height: 7, fill: "white" },
    ],
  },
  {
    className: "absolute top-[12%] right-[15%] opacity-50",
    width: 100,
    height: 50,
    viewBox: "0 0 50 25",
    rects: [
      { x: 5, y: 12, width: 35, height: 8, fill: "white" },
      { x: 10, y: 7, width: 12, height: 5, fill: "white" },
      { x: 25, y: 5, width: 10, height: 7, fill: "white" },
    ],
  },
  {
    className: "absolute top-[8%] left-[35%] opacity-40",
    width: 80,
    height: 40,
    viewBox: "0 0 40 20",
    rects: [
      { x: 5, y: 10, width: 30, height: 7, fill: "white" },
      { x: 8, y: 5, width: 8, height: 5, fill: "white" },
      { x: 20, y: 6, width: 12, height: 4, fill: "white" },
    ],
  },
  {
    className: "absolute top-[18%] right-[40%] opacity-35",
    width: 60,
    height: 30,
    viewBox: "0 0 30 15",
    rects: [
      { x: 3, y: 8, width: 24, height: 5, fill: "white" },
      { x: 8, y: 4, width: 6, height: 4, fill: "white" },
      { x: 16, y: 5, width: 8, height: 3, fill: "white" },
    ],
  },
  {
    className: "absolute top-[3%] left-[55%] opacity-55",
    width: 140,
    height: 70,
    viewBox: "0 0 70 35",
    rects: [
      { x: 10, y: 18, width: 50, height: 12, fill: "white" },
      { x: 18, y: 10, width: 14, height: 8, fill: "white" },
      { x: 38, y: 8, width: 18, height: 10, fill: "white" },
      { x: 5, y: 22, width: 10, height: 8, fill: "white" },
    ],
  },
  {
    className: "absolute top-[15%] left-[18%] opacity-45",
    width: 90,
    height: 45,
    viewBox: "0 0 45 22",
    rects: [
      { x: 5, y: 12, width: 35, height: 8, fill: "white" },
      { x: 12, y: 6, width: 10, height: 6, fill: "white" },
      { x: 26, y: 7, width: 12, height: 5, fill: "white" },
    ],
  },
  {
    className: "absolute top-[6%] right-[28%] opacity-50",
    width: 110,
    height: 55,
    viewBox: "0 0 55 27",
    rects: [
      { x: 8, y: 14, width: 40, height: 10, fill: "white" },
      { x: 14, y: 8, width: 12, height: 6, fill: "white" },
      { x: 30, y: 6, width: 14, height: 8, fill: "white" },
    ],
  },
  {
    className: "hidden xl:block absolute top-[10%] left-[42%] opacity-45",
    width: 100,
    height: 50,
    viewBox: "0 0 50 25",
    rects: [
      { x: 5, y: 12, width: 35, height: 8, fill: "white" },
      { x: 10, y: 7, width: 12, height: 5, fill: "white" },
      { x: 25, y: 5, width: 10, height: 7, fill: "white" },
    ],
  },
  {
    className: "hidden xl:block absolute top-[20%] left-[48%] opacity-40",
    width: 80,
    height: 40,
    viewBox: "0 0 40 20",
    rects: [
      { x: 5, y: 10, width: 30, height: 7, fill: "white" },
      { x: 8, y: 5, width: 8, height: 5, fill: "white" },
      { x: 20, y: 6, width: 12, height: 4, fill: "white" },
    ],
  },
  {
    className: "hidden xl:block absolute top-[7%] right-[42%] opacity-50",
    width: 90,
    height: 45,
    viewBox: "0 0 45 22",
    rects: [
      { x: 5, y: 12, width: 35, height: 8, fill: "white" },
      { x: 12, y: 6, width: 10, height: 6, fill: "white" },
      { x: 26, y: 7, width: 12, height: 5, fill: "white" },
    ],
  },
  {
    className: "hidden 2xl:block absolute top-[5%] left-[45%] opacity-55",
    width: 120,
    height: 60,
    viewBox: "0 0 60 30",
    rects: [
      { x: 10, y: 15, width: 40, height: 10, fill: "white" },
      { x: 15, y: 10, width: 10, height: 5, fill: "white" },
      { x: 30, y: 8, width: 15, height: 7, fill: "white" },
      { x: 5, y: 18, width: 8, height: 7, fill: "white" },
    ],
  },
  {
    className: "hidden 2xl:block absolute top-[15%] right-[45%] opacity-45",
    width: 95,
    height: 48,
    viewBox: "0 0 48 24",
    rects: [
      { x: 6, y: 13, width: 36, height: 8, fill: "white" },
      { x: 12, y: 7, width: 11, height: 6, fill: "white" },
      { x: 27, y: 6, width: 12, height: 6, fill: "white" },
    ],
  },
  {
    className: "hidden 2xl:block absolute top-[12%] left-[52%] opacity-35",
    width: 70,
    height: 35,
    viewBox: "0 0 35 18",
    rects: [
      { x: 4, y: 9, width: 27, height: 6, fill: "white" },
      { x: 9, y: 5, width: 7, height: 4, fill: "white" },
      { x: 18, y: 6, width: 10, height: 3, fill: "white" },
    ],
  },
];

const sun: Decoration = {
  className: "absolute top-[4%] right-[6%]",
  width: 100,
  height: 100,
  viewBox: "0 0 50 50",
  rects: [
    { x: 17, y: 17, width: 16, height: 16, fill: "#fbbf24" },
    { x: 15, y: 15, width: 20, height: 20, fill: "#fcd34d", opacity: 0.5 },
    { x: 22, y: 4, width: 6, height: 8, fill: "#fbbf24", opacity: 0.8 },
    { x: 22, y: 38, width: 6, height: 8, fill: "#fbbf24", opacity: 0.8 },
    { x: 4, y: 22, width: 8, height: 6, fill: "#fbbf24", opacity: 0.8 },
    { x: 38, y: 22, width: 8, height: 6, fill: "#fbbf24", opacity: 0.8 },
    { x: 8, y: 8, width: 5, height: 5, fill: "#fbbf24", opacity: 0.6 },
    { x: 37, y: 8, width: 5, height: 5, fill: "#fbbf24", opacity: 0.6 },
    { x: 8, y: 37, width: 5, height: 5, fill: "#fbbf24", opacity: 0.6 },
    { x: 37, y: 37, width: 5, height: 5, fill: "#fbbf24", opacity: 0.6 },
  ],
};

const skyline: Decoration = {
  className: "absolute bottom-[18%] left-0 right-0 z-0 opacity-30",
  width: "100%",
  height: 280,
  viewBox: "0 0 800 140",
  preserveAspectRatio: "none",
  rects: [
    { x: 0, y: 100, width: 80, height: 40, fill: "#4b5563" },
    { x: 15, y: 85, width: 50, height: 20, fill: "#6b7280" },
    { x: 25, y: 75, width: 30, height: 15, fill: "#9ca3af" },
    { x: 70, y: 105, width: 60, height: 35, fill: "#4b5563" },
    { x: 85, y: 92, width: 35, height: 18, fill: "#6b7280" },
    { x: 140, y: 50, width: 18, height: 90, fill: "#374151" },
    { x: 143, y: 55, width: 4, height: 5, fill: "#fbbf24", opacity: 0.5 },
    { x: 143, y: 68, width: 4, height: 5, fill: "#fbbf24", opacity: 0.4 },
    { x: 143, y: 82, width: 4, height: 5, fill: "#fbbf24", opacity: 0.3 },
    { x: 150, y: 62, width: 4, height: 5, fill: "#fbbf24", opacity: 0.4 },
    { x: 150, y: 95, width: 4, height: 5, fill: "#fbbf24", opacity: 0.5 },
    { x: 162, y: 30, width: 24, height: 110, fill: "#4b5563" },
    { x: 166, y: 38, width: 5, height: 6, fill: "#fbbf24", opacity: 0.5 },
    { x: 175, y: 50, width: 5, height: 6, fill: "#fbbf24", opacity: 0.4 },
    { x: 166, y: 65, width: 5, height: 6, fill: "#fbbf24", opacity: 0.3 },
    { x: 175, y: 78, width: 5, height: 6, fill: "#fbbf24", opacity: 0.4 },
    { x: 166, y: 92, width: 5, height: 6, fill: "#fbbf24", opacity: 0.5 },
    { x: 175, y: 105, width: 5, height: 6, fill: "#fbbf24", opacity: 0.3 },
    { x: 190, y: 60, width: 15, height: 80, fill: "#374151" },
    { x: 193, y: 68, width: 4, height: 5, fill: "#fbbf24", opacity: 0.4 },
    { x: 193, y: 85, width: 4, height: 5, fill: "#fbbf24", opacity: 0.3 },
    { x: 193, y: 100, width: 4, height: 5, fill: "#fbbf24", opacity: 0.5 },
    { x: 210, y: 75, width: 12, height: 65, fill: "#4b5563" },
    { x: 226, y: 55, width: 16, height: 85, fill: "#374151" },
    { x: 230, y: 62, width: 4, height: 5, fill: "#fbbf24", opacity: 0.4 },
    { x: 230, y: 80, width: 4, height: 5, fill: "#fbbf24", opacity: 0.3 },
    { x: 236, y: 95, width: 4, height: 5, fill: "#fbbf24", opacity: 0.5 },
    { x: 246, y: 70, width: 14, height: 70, fill: "#4b5563" },
    { x: 545, y: 65, width: 14, height: 75, fill: "#4b5563" },
    { x: 562, y: 40, width: 20, height: 100, fill: "#374151" },
    { x: 566, y: 48, width: 5, height: 6, fill: "#fbbf24", opacity: 0.5 },
    { x: 573, y: 60, width: 5, height: 6, fill: "#fbbf24", opacity: 0.4 },
    { x: 566, y: 75, width: 5, height: 6, fill: "#fbbf24", opacity: 0.3 },
    { x: 573, y: 88, width: 5, height: 6, fill: "#fbbf24", opacity: 0.5 },
    { x: 566, y: 102, width: 5, height: 6, fill: "#fbbf24", opacity: 0.4 },
    { x: 586, y: 25, width: 26, height: 115, fill: "#4b5563" },
    { x: 591, y: 32, width: 5, height: 6, fill: "#fbbf24", opacity: 0.5 },
    { x: 600, y: 45, width: 5, height: 6, fill: "#fbbf24", opacity: 0.4 },
    { x: 591, y: 58, width: 5, height: 6, fill: "#fbbf24", opacity: 0.3 },
    { x: 600, y: 72, width: 5, height: 6, fill: "#fbbf24", opacity: 0.5 },
    { x: 591, y: 88, width: 5, height: 6, fill: "#fbbf24", opacity: 0.4 },
    { x: 600, y: 105, width: 5, height: 6, fill: "#fbbf24", opacity: 0.3 },
    { x: 616, y: 55, width: 16, height: 85, fill: "#374151" },
    { x: 620, y: 62, width: 4, height: 5, fill: "#fbbf24", opacity: 0.4 },
    { x: 620, y: 80, width: 4, height: 5, fill: "#fbbf24", opacity: 0.3 },
    { x: 626, y: 95, width: 4, height: 5, fill: "#fbbf24", opacity: 0.5 },
    { x: 636, y: 70, width: 12, height: 70, fill: "#4b5563" },
    { x: 655, y: 100, width: 70, height: 40, fill: "#4b5563" },
    { x: 670, y: 88, width: 45, height: 18, fill: "#6b7280" },
    { x: 682, y: 78, width: 25, height: 14, fill: "#9ca3af" },
    { x: 715, y: 95, width: 85, height: 45, fill: "#4b5563" },
    { x: 735, y: 82, width: 55, height: 20, fill: "#6b7280" },
    { x: 750, y: 70, width: 30, height: 16, fill: "#9ca3af" },
  ],
};
---

<div class="hidden md:block fixed inset-0 pointer-events-none overflow-hidden -z-10">
  {clouds.map((cloud) => (
    <div class={cloud.className}>
      <PixelArt
        width={cloud.width}
        height={cloud.height}
        viewBox={cloud.viewBox}
        rects={cloud.rects}
      />
    </div>
  ))}

  <div class={sun.className}>
    <PixelArt
      width={sun.width}
      height={sun.height}
      viewBox={sun.viewBox}
      rects={sun.rects}
    />
  </div>

  {/* Ground baseline and sidewalk */}
  <div class="absolute bottom-0 left-0 right-0 h-[18%] bg-charcoal/5 border-t-8 border-charcoal/10 z-0">
    <div class="absolute top-0 left-0 right-0 h-4 bg-charcoal/5 border-b-2 border-charcoal/10"></div>
    <div class="absolute top-[60%] left-0 right-0 h-1 border-t-4 border-dashed border-charcoal/10"></div>
  </div>

  <div class={skyline.className}>
    <PixelArt
      width={skyline.width}
      height={skyline.height}
      viewBox={skyline.viewBox}
      preserveAspectRatio={skyline.preserveAspectRatio}
      rects={skyline.rects}
    />
  </div>

  <slot />
</div>
